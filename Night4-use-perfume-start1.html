<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>5 คืนสยอง - น้ำหอม</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="Night4-use-perfume-start1.css">
</head>
<body onclick="nextLine()">
  <div class="scene-container">
    <div class="text-box" id="caption-text"></div>
  </div>

  <script>
    const lines = [
      'ไทม์: โอ้ยย !!!',
      'ฝน: ฉันฉีดน้ำหอมใส่ตาของเขา ดูเหมือนมันจะได้ผล เขาทรุดตัวลงไปและร้องด้วยความเจ็บปวด',
      'ฝน: ช่วยด้วยค่ะ!! มีใครได้ยินมั้ย!',
      'ฉันรีบตั้งสติและวิ่งหนีให้เร็วที่สุด เมื่อตั้งสติได้ฉันจึงรีบหยิบมือถือขึ้นมาและทักหาเพื่อนทันที'
    ];

    const captionEl = document.getElementById('caption-text');
    let index = 0;

    function nextLine() {
      if (index >= lines.length) {
        window.location.href = 'Night4-chat-choice-perfume-start1.html';
        return;
      }

      const text = lines[index];
      let html = '';

      if (text.includes(':')) {
        const speaker = text.split(':')[0].trim();
        const content = text.split(':').slice(1).join(':').trim();
        let className = speaker === 'ฝน' ? 'fon' : speaker === 'ไทม์' ? 'time' : 'name';
        html = `<span class="name ${className}">${speaker}:</span> ${content}`;
      } else {
        html = `<span class="narration">${text}</span>`;
      }

      captionEl.style.opacity = 0;
      setTimeout(() => {
        captionEl.innerHTML = `<div class="fade-in">${html}</div>`;
        captionEl.style.opacity = 1;
      }, 100);

      index++;
    }

    window.onload = () => {
      nextLine();

      // เปลี่ยนภาพพื้นหลังหลังจาก 6 วิ
      setTimeout(() => {
        document.body.style.backgroundImage = "url('images/Run-away2.png')";
      }, 6000);
    };
  </script>
</body>
</html>
