<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<title>5 р╕Др╕╖р╕Щр╕кр╕вр╕нр╕З - р╕Ьр╕▒р╕Ър╕вр╕▓р╕бр╕Др╣Ир╕│р╕Др╕╖р╕Щ</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="Night3-Insidepub.css">
</head>
<body>

<div class="scene-container" id="scene">
  <div class="text-box" id="text-box"></div>
  <div class="choices" id="choice-box">
    <button class="choice-button" onclick="event.stopPropagation(); selectChoice(1)">р╕гр╕▒р╕Ър╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Фр╕╖р╣Ир╕б</button>
    <button class="choice-button" onclick="event.stopPropagation(); selectChoice(2)">р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш</button>
  </div>
</div>

<!-- р╣Ар╕Юр╕ер╕З background -->
<audio id="bg-music" src="sounds/club-music-loop-74178.mp3" preload="auto" loop></audio>

<!-- р╕Ыр╕╕р╣Ир╕бр╕Ыр╕гр╕▒р╕Ър╣Ар╕кр╕╡р╕вр╕З -->
<div class="volume-controls" onclick="event.stopPropagation()">
  <button class="volume-button" id="vol-down">ЁЯФЙ</button>
  <input type="range" id="volumeSlider" min="0" max="1" step="0.01">
  <button class="volume-button" id="vol-up">ЁЯФК</button>
</div>

<script>
const textBox = document.getElementById("text-box");
const choiceBox = document.getElementById("choice-box");
const bgMusic = document.getElementById('bg-music');
const volumeSlider = document.getElementById('volumeSlider');
const volUp = document.getElementById('vol-up');
const volDown = document.getElementById('vol-down');

bgMusic.volume = 0.5;
volumeSlider.value = bgMusic.volume;

const texts = [
  "р╣Ар╕нр╕бр╕╡р╣И: р╣Вр╕нр╣Йр╕вр╕вр╕в... р╕Др╕╖р╕Щр╕Щр╕╡р╣Ир╕Йр╕▒р╕Щр╕Вр╕нр╣Ар╕бр╕▓р╣Гр╕лр╣Йр╕ер╕╖р╕бр╣Вр╕ер╕Бр╣Ар╕ер╕вр╕Щр╕░!",
  "р╣Ар╕лр╕бр╕╡р╕вр╕з: р╣Ар╕нр╕бр╕╡р╣И р╣Ар╕Ър╕▓р╣Жр╕лр╕Щр╣Ир╕нр╕в р╣Ар╕Фр╕╡р╣Лр╕вр╕зр╕лр╕ер╕╕р╕Фр╣Др╕Ыр╣Ар╕Хр╣Йр╕Щр╕Ър╕Щр╣Вр╕Хр╣Кр╕░р╕нр╕╡р╕Б...",
  "р╕Щр╣Йр╕│р╕Эр╕Щ: р╕ор╣Ир╕▓р╣Жр╣Ж р╕нр╕вр╣Ир╕▓р╣Ар╕бр╕▓р╕Ир╕Щр╕ер╕╖р╕бр╕Бр╕ер╕▒р╕Ър╕Ър╣Йр╕▓р╕Щр╕Бр╣Зр╣Бр╕ер╣Йр╕зр╕Бр╕▒р╕Щр╕ер╣Ир╕░",
  "р╕Кр╕▓р╕вр╣Бр╕Ыр╕ер╕Бр╕лр╕Щр╣Йр╕▓: р╕кр╕зр╕▒р╕кр╕Фр╕╡р╕Др╕гр╕▒р╕Ър╕кр╕▓р╕з р╣Ж р╕бр╕▓р╕Бр╕▒р╕Щ 3 р╕Др╕Щр╣Ар╕лр╕гр╕нр╕Др╕гр╕▒р╕Ъ...р╕кр╕Щр╣Гр╕Ир╕бр╕▓р╕Фр╕╖р╣Ир╕бр╕Фр╣Йр╕зр╕вр╕Бр╕▒р╕Щр╕бр╕▒р╣Йр╕вр╕Др╕гр╕▒р╕Ъ?"
];

let index = 0;
let firstClick = true;

function nextText() {
  if (firstClick) { 
    bgMusic.play().catch(err => console.log("р╣Ар╕ер╣Ир╕Щр╣Ар╕Юр╕ер╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й:", err)); 
    firstClick = false; 
  }
  if (index < texts.length) {
    textBox.style.opacity = 0;
    setTimeout(() => {
      textBox.textContent = texts[index++];
      textBox.style.opacity = 1;
      if(index === texts.length) setTimeout(() => { choiceBox.style.display = "flex"; }, 700);
    }, 300);
  }
}

function selectChoice(choice) {
  if (choice === 1) window.location.href = "Night3-Pub-choice1.html";
  else window.location.href = "Night3-Pub-choice2.html";
}

document.body.addEventListener('click', nextText);

window.onload = () => { 
  setTimeout(() => { document.body.style.backgroundImage = "url('images/glass.png')"; }, 5000); 
};

// р╕Ыр╕гр╕▒р╕Ър╣Ар╕кр╕╡р╕вр╕З
volUp.addEventListener('click', e => { 
  e.stopPropagation(); 
  bgMusic.volume = Math.min(bgMusic.volume + 0.1, 1); 
  volumeSlider.value = bgMusic.volume; 
});
volDown.addEventListener('click', e => { 
  e.stopPropagation(); 
  bgMusic.volume = Math.max(bgMusic.volume - 0.1, 0); 
  volumeSlider.value = bgMusic.volume; 
});
volumeSlider.addEventListener('input', e => { bgMusic.volume = e.target.value; });
</script>
</body>
</html>
