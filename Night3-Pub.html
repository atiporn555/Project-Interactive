<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>5 คืนสยอง - คืนที่ 3</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="Night3-Pub.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
    body {
      background-color: #111;
      color: white;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      padding: 40px 20px;
      cursor: pointer;
    }
    .scene-container { width: 100%; max-width: 640px; text-align: center; }
    .night-label {
      font-size: 1.6rem;
      font-weight: bold;
      margin-bottom: 10px;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .text-box {
      font-size: 1.2rem;
      min-height: 60px;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    /* ปุ่มปรับเสียง */
    .volume-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0,0,0,0.3);
      padding: 6px 10px;
      border-radius: 8px;
      z-index: 1000;
    }
    .volume-controls input[type="range"] { width: 120px; accent-color: red; }
    .volume-button { background-color: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; padding: 6px 10px; color: white; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body onclick="nextText()">
  <div class="scene-container">
    <div class="night-label" id="night-label">คืนที่ 3</div>
    <div class="text-box" id="text-box"></div>
  </div>

  <!-- เพลง background -->
  <audio id="bg-music" src="sounds/club-music-loop-74178.mp3" preload="auto" loop></audio>

  <!-- ปุ่มปรับเสียง -->
  <div class="volume-controls" onclick="event.stopPropagation()">
    <button class="volume-button" id="vol-down">🔉</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01">
    <button class="volume-button" id="vol-up">🔊</button>
  </div>

  <script>
    const texts = [
      "“คืนนี้...ฉันลางานจากร้านสะดวกซื้อ”",
      "“ไม่ได้มีเหตุผลพิเศษอะไรหรอก แค่...อยากออกไปเจอเพื่อน ๆ บ้าง”",
      "“มันนานมากแล้ว — ที่ฉันไม่ได้หัวเราะเสียงดัง ๆ หรือปล่อยตัวให้สนุกแบบนี้”",
      "“บางที...ฉันก็แค่อยากลืมความรู้สึกแปลก ๆ ที่เกิดขึ้นในสองคืนก่อนให้หมดไป”",
      "\"คืนนี้...ฉันแค่จะสนุกให้เต็มที่ ไม่ต้องคิดอะไรแล้ว\""
    ];

    let index = 0;
    const textBox = document.getElementById("text-box");
    const nightLabel = document.getElementById("night-label");

    const bgMusic = document.getElementById('bg-music');
    const volumeSlider = document.getElementById('volumeSlider');
    const volUp = document.getElementById('vol-up');
    const volDown = document.getElementById('vol-down');
    let firstClick = true;

    // ตั้งค่าเริ่มต้นของ volume slider
    bgMusic.volume = 0.5;
    volumeSlider.value = bgMusic.volume;

    function nextText() {
      // เล่นเพลงครั้งแรกหลังคลิก
      if (firstClick) {
        bgMusic.play().catch(err => console.log("เล่นเพลงไม่ได้:", err));
        firstClick = false;
      }

      if (index === 0) nightLabel.style.opacity = 1;

      if (index < texts.length) {
        textBox.style.opacity = 0;
        setTimeout(() => {
          textBox.textContent = texts[index];
          textBox.style.opacity = 1;
          index++;
        }, 500);
      } else if (index === texts.length) {
        setTimeout(() => { window.location.href = "Night3-Insidepub.html"; }, 1000);
      }
    }

    // ปุ่มปรับเสียง
    volUp.addEventListener('click', e => {
      e.stopPropagation();
      bgMusic.volume = Math.min(bgMusic.volume + 0.1, 1);
      volumeSlider.value = bgMusic.volume;
    });
    volDown.addEventListener('click', e => {
      e.stopPropagation();
      bgMusic.volume = Math.max(bgMusic.volume - 0.1, 0);
      volumeSlider.value = bgMusic.volume;
    });
    volumeSlider.addEventListener('input', e => { bgMusic.volume = e.target.value; });
  </script>
</body>
</html>
