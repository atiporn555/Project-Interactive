<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>5 ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¢‡∏≠‡∏á - ‡∏ï‡∏µ 3</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="Night2-3am.html.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
    body {
      background-color: #111; color: white; height: 100vh;
      display: flex; flex-direction: column; justify-content: flex-end;
      align-items: center; padding: 20px; text-align: center; cursor: pointer;
    }
    .scene-container { width: 100%; max-width: 700px; }
    .time-label { font-size: 1.4rem; font-weight: bold; margin-bottom: 20px; opacity: 0; transition: opacity 1s ease; }
    .text-box { font-size: 1.05rem; min-height: 80px; opacity: 0; transition: opacity 0.6s ease-in-out; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; white-space: pre-line; }
    .choices { display: none; flex-direction: row; justify-content: center; gap: 20px; margin-bottom: 30px; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ + hover/active ‡∏™‡∏µ‡πÅ‡∏î‡∏á */
    .choice-button { 
      padding: 12px 20px; 
      font-size: 1rem; 
      background-color: transparent;   /* ‡∏õ‡∏Å‡∏ï‡∏¥‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ */
      border: 1px solid #555; 
      border-radius: 10px; 
      color: white; 
      cursor: pointer; 
      transition: all 0.3s ease; 
      width: 200px; 
      text-align: center; 
    }
    .choice-button:hover,
    .choice-button:active { 
      background-color: rgba(255, 0, 0, 0.6); /* hover/active ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏î‡∏á */
    }

    .volume-controls {
      position: fixed; top: 20px; right: 20px; display: flex; align-items: center; gap: 10px;
      background: rgba(0,0,0,0.3); padding: 6px 10px; border-radius: 8px; z-index: 1000;
    }
    .volume-controls input[type="range"] { width: 120px; accent-color: red; }
    .volume-button { background-color: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; padding: 6px 10px; color: white; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body onclick="nextText()">
  <div class="scene-container">
    <div class="time-label" id="time-label">‡∏ï‡∏µ 3</div>
    <div class="text-box" id="text-box"></div>
    <div class="choices" id="choice-box">
      <button class="choice-button" onclick="selectChoice(1)">‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏î‡∏π</button>
      <button class="choice-button" onclick="selectChoice(2)">‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button>
    </div>
  </div>

  <!-- ‡πÄ‡∏û‡∏•‡∏á background -->
  <audio id="bg-music" src="sounds/scary-horror-atmosphere-176754.mp3" preload="auto" loop></audio>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
  <div class="volume-controls" onclick="event.stopPropagation()">
    <button class="volume-button" id="vol-down">üîâ</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01">
    <button class="volume-button" id="vol-up">üîä</button>
  </div>

  <script>
    const timeLabel = document.getElementById("time-label");
    const textBox = document.getElementById("text-box");
    const choiceBox = document.getElementById("choice-box");

    const texts = [
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡∏á‡πà‡∏ß‡∏á‡∏à‡∏±‡∏á...",
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡πÄ‡∏≠‡πä‡∏∞..‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡∏£‡∏ñ‡∏à‡∏≠‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏´‡∏£‡∏≠? ‡πÅ‡∏õ‡∏•‡∏Å‡∏à‡∏±‡∏á"
    ];

    let index = 0;
    let hasShownTime = false;
    let isTransitioning = false;
    let firstClick = true;

    const bgMusic = document.getElementById('bg-music');
    const volumeSlider = document.getElementById('volumeSlider');
    const volUp = document.getElementById('vol-up');
    const volDown = document.getElementById('vol-down');

    bgMusic.volume = 0.5;
    volumeSlider.value = bgMusic.volume;

    function nextText() {
      if (firstClick) {
        bgMusic.play().catch(err => console.log("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:", err));
        firstClick = false;
      }

      if (isTransitioning) return;
      isTransitioning = true;

      if (!hasShownTime) {
        timeLabel.style.opacity = 1;
        setTimeout(() => {
          timeLabel.style.opacity = 0;
          hasShownTime = true;
          isTransitioning = false;
        }, 1500);
        return;
      }

      if (index < texts.length) {
        textBox.style.opacity = 0;
        setTimeout(() => {
          textBox.textContent = texts[index++];
          textBox.style.opacity = 1;
          isTransitioning = false;
        }, 500);
      } else {
        textBox.style.display = "none";
        choiceBox.style.display = "flex";
        isTransitioning = false;
      }
    }

    function selectChoice(choice) {
      event.stopPropagation();
      if (choice === 1) {
        window.location.href = "Night2-3am-choice1.html";
      } else {
        window.location.href = "Night2-3am-choice2.html";
      }
    }

    // ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    volUp.addEventListener('click', e => { e.stopPropagation(); bgMusic.volume = Math.min(bgMusic.volume + 0.1, 1); volumeSlider.value = bgMusic.volume; });
    volDown.addEventListener('click', e => { e.stopPropagation(); bgMusic.volume = Math.max(bgMusic.volume - 0.1, 0); volumeSlider.value = bgMusic.volume; });
    volumeSlider.addEventListener('input', e => { bgMusic.volume = e.target.value; });

    document.addEventListener("DOMContentLoaded", () => {
      timeLabel.style.opacity = 1;
      setTimeout(() => { timeLabel.style.opacity = 0; hasShownTime = true; }, 1500);
    });
  </script>
</body>
</html>
