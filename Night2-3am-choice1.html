<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>5 ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¢‡∏≠‡∏á - ‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏î‡∏π</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="Night2-3am-choice1.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Kanit', sans-serif; }
    body {
      background-color: #111;
      color: white;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      background-image: url('images/car_cleanup-bg.png');
      background-size: cover;
      background-position: center;
      transition: background-image 1.5s ease-in-out;
    }
    .scene-container { width: 100%; max-width: 700px; }
    .text-box {
      font-size: 1.05rem;
      min-height: 80px;
      opacity: 0;
      transition: opacity 0.6s ease-in-out;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: pre-line;
    }
    .note {
      font-size: 0.9rem;
      color: #888;
      opacity: 0;
      transition: opacity 0.5s ease;
      margin-bottom: 30px;
    }
    .note.visible { opacity: 1; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á */
    .volume-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0,0,0,0.3);
      padding: 6px 10px;
      border-radius: 8px;
      z-index: 1000;
    }
    .volume-controls input[type="range"] { width: 120px; accent-color: red; }
    .volume-button { background-color: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; padding: 6px 10px; color: white; font-weight: bold; cursor: pointer; }
  </style>
</head>
<body onclick="handleClick()">
  <div class="scene-container">
    <div class="text-box" id="text-box"></div>
    <div class="note" id="note">‡πÅ‡∏ï‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ...</div>
  </div>

  <!-- ‡πÄ‡∏û‡∏•‡∏á background -->
  <audio id="bg-music" src="sounds/scary-horror-atmosphere-176754.mp3" preload="auto" loop></audio>
  <!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡∏° -->
  <audio id="wind-sound" src="sounds/wind-1-44149.mp3" preload="auto"></audio>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
  <div class="volume-controls" onclick="event.stopPropagation()">
    <button class="volume-button" id="vol-down">üîâ</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01">
    <button class="volume-button" id="vol-up">üîä</button>
  </div>

  <script>
    const textBox = document.getElementById("text-box");
    const note = document.getElementById("note");

    const texts = [
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡∏≠‡∏∑‡∏°...‡∏Ç‡∏≠‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏î‡∏π‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏Å‡πá‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏±‡∏ô",
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡∏≠‡πâ‡∏≤‡∏ß...‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏ñ‡πÄ‡∏•‡∏¢?",
      "‡∏â‡∏±‡∏ô‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏â‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏ü‡∏£‡∏ñ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏ö‡∏ô‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏•‡∏≤‡∏ô‡∏à‡∏≠‡∏î‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏ô‡∏ï‡πå",
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡∏´‡∏£‡∏∑‡∏≠‡∏â‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡∏≤‡∏ù‡∏≤‡∏î...",
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ...",
      "‡∏â‡∏±‡∏ô‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏´‡∏ô‡∏≤‡∏ß‡∏™‡∏±‡πà‡∏ô‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡πâ‡∏≠‡∏á‡∏°‡∏≠‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏∑‡∏î ‡πÅ‡∏ï‡πà‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢",
      "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô: ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤..."
    ];

    let index = 0;
    let readyToNext = false;
    let firstClick = true;

    const bgMusic = document.getElementById('bg-music');
    const windSound = document.getElementById('wind-sound');
    const volumeSlider = document.getElementById('volumeSlider');
    const volUp = document.getElementById('vol-up');
    const volDown = document.getElementById('vol-down');

    // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    bgMusic.volume = 0.5;
    volumeSlider.value = bgMusic.volume;

    function handleClick() {
      if (firstClick) {
        bgMusic.play().catch(err => console.log("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:", err));
        firstClick = false;
      }

      if (readyToNext) {
        window.location.href = "END-Night2.html";
        return;
      }
      showNextText();
    }

    function showNextText() {
      textBox.style.opacity = 0;

      setTimeout(() => {
        if (index < texts.length) {
          const currentText = texts[index++];
          textBox.textContent = currentText;
          textBox.style.opacity = 1;

          // ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ "‡∏ô‡πâ‡∏≥‡∏ù‡∏ô:" ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡∏°
          if (currentText.startsWith("‡∏ô‡πâ‡∏≥‡∏ù‡∏ô:")) {
            windSound.currentTime = 0;
            windSound.play().catch(err => console.log("‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏•‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ:", err));
          }

          if (index === texts.length) {
            setTimeout(() => {
              note.classList.add("visible");
              readyToNext = true;
            }, 700);
          }
        }
      }, 400);
    }

    window.onload = () => {
      showNextText();

      setTimeout(() => {
        document.body.style.backgroundImage = "url('images/store-bg.png')";
      }, 5000);
    };

    // ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    volUp.addEventListener('click', e => { e.stopPropagation(); bgMusic.volume = Math.min(bgMusic.volume + 0.1, 1); volumeSlider.value = bgMusic.volume; });
    volDown.addEventListener('click', e => { e.stopPropagation(); bgMusic.volume = Math.max(bgMusic.volume - 0.1, 0); volumeSlider.value = bgMusic.volume; });
    volumeSlider.addEventListener('input', e => { bgMusic.volume = e.target.value; });

  </script>
</body>
</html>
