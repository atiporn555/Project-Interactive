<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>5 ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¢‡∏≠‡∏á - ‡πÉ‡∏ä‡πâ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡πÅ‡∏ó‡∏á</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="Night4-use-key-start1.css">
  <style>
    .volume-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0,0,0,0.3);
      padding: 6px 10px;
      border-radius: 8px;
      z-index: 1000;
    }

    .volume-controls input[type="range"] {
      width: 120px;
      accent-color: red;
    }

    .volume-button {
      background-color: rgba(50,50,50,0.6);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 6px;
      padding: 6px 10px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.1s ease;
    }

    .volume-button:hover {
      background-color: rgba(255,0,0,0.6);
      transform: scale(1.05);
    }
  </style>
</head>
<body>

  <div class="scene-container">
    <div class="text-box" id="text-box"></div>
  </div>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
  <div class="volume-controls" onclick="event.stopPropagation()">
    <button class="volume-button" id="vol-down">üîâ</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
    <button class="volume-button" id="vol-up">üîä</button>
  </div>

  <!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏¥‡πà‡∏á, ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡∏£‡∏µ‡∏î‡∏£‡πâ‡∏≠‡∏á -->
  <audio id="bg-sound" src="sounds/bass-horror-movie-pad-391595.mp3" loop></audio>
  <audio id="run-sound" src="sounds/running-on-concrete-268478.mp3" loop></audio>
  <audio id="scream-sound" src="sounds/man-death-scream-186763.mp3"></audio>

  <script>
    const textBox = document.getElementById("text-box");
    const bgSound = document.getElementById("bg-sound");
    const runSound = document.getElementById("run-sound");
    const screamSound = document.getElementById("scream-sound");
    const volumeSlider = document.getElementById('volumeSlider');

    const texts = [
      '<span class="name">‡πÑ‡∏ó‡∏°‡πå:</span> "‡πÇ‡∏≠‡πâ‡∏¢‡∏¢‡∏¢!! ‡πÅ‡∏°‡πà‡∏á‡πÄ‡∏≠‡πâ‡∏¢ ‡∏≠‡∏µ‡∏ù‡∏ô!!"',
      '<span class="inner-thought">(‡πÉ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏≠‡∏¢‡πÑ‡∏õ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏à‡πá‡∏ö‡∏õ‡∏ß‡∏î ‡∏â‡∏±‡∏ô‡∏Å‡πá‡∏£‡∏µ‡∏ö‡∏ß‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏ì ‡∏ï‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏â‡∏±‡∏ô‡∏†‡∏≤‡∏ß‡∏ô‡∏≤‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡∏™‡∏±‡∏Å‡∏Ñ‡∏ô)</span>',
      '<span class="name">‡πÑ‡∏ó‡∏°‡πå:</span> "‡∏°‡∏∂‡∏á‡∏à‡∏∞‡∏´‡∏ô‡∏µ‡πÑ‡∏õ‡πÑ‡∏´‡∏ô!!"',
      '<span class="name">‡∏ù‡∏ô:</span> "‡∏ä‡πà‡∏ß‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞!!"',
      '<span class="inner-thought">(‡∏â‡∏±‡∏ô‡∏ß‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡πà‡∏ô‡∏Å‡∏•‡∏±‡∏ß ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πà‡∏á‡∏Å‡πá‡πÑ‡∏°‡πà‡∏•‡∏∑‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠..)</span>'
    ];

    let index = 0;
    let isTransitioning = false;
    let soundStarted = false;

    function nextText() {
      if (isTransitioning) return;
      isTransitioning = true;

      textBox.style.opacity = 0;
      setTimeout(() => {
        if (index < texts.length) {
          textBox.innerHTML = texts[index++];
          textBox.style.opacity = 1;
          isTransitioning = false;

          // ‡πÄ‡∏•‡πà‡∏ô bg sound ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
          if (!soundStarted) {
            bgSound.volume = volumeSlider.value;
            bgSound.play().catch(()=>console.log("‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á"));
            soundStarted = true;
          }

          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏¥‡πà‡∏á
          if (texts[index-1].includes('‡πÉ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏≤‡∏ñ‡∏≠‡∏¢‡πÑ‡∏õ')) {
            runSound.volume = 0.5;
            runSound.play().catch(()=>console.log("‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ß‡∏¥‡πà‡∏á"));
          } else {
            runSound.pause();
            runSound.currentTime = 0;
          }

          // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡∏£‡∏µ‡∏î‡∏£‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏Å
          if (texts[index-1].includes('‡πÇ‡∏≠‡πâ‡∏¢‡∏¢‡∏¢!! ‡πÅ‡∏°‡πà‡∏á‡πÄ‡∏≠‡πâ‡∏¢')) {
            screamSound.volume = volumeSlider.value;
            screamSound.play().catch(()=>console.log("‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡∏£‡∏µ‡∏î‡∏£‡πâ‡∏≠‡∏á"));
          }

        } else {
          window.location.href = "Night4-chat-choice-key-start1.html";
        }
      }, 500);
    }

    window.onload = function() {
      document.body.style.backgroundImage = "url('images/key.png')";
      setTimeout(() => {
        document.body.style.backgroundImage = "url('images/Run.png')";
      }, 5000);
    };

    // Volume controls
    volumeSlider.addEventListener('input', () => { 
      bgSound.volume = volumeSlider.value;
      runSound.volume = volumeSlider.value;
      screamSound.volume = volumeSlider.value;
    });
    document.getElementById('vol-down').addEventListener('click', e => { 
      e.stopPropagation(); 
      bgSound.volume = Math.max(0, bgSound.volume - 0.05); 
      runSound.volume = bgSound.volume;
      screamSound.volume = bgSound.volume;
      volumeSlider.value = bgSound.volume; 
    });
    document.getElementById('vol-up').addEventListener('click', e => { 
      e.stopPropagation(); 
      bgSound.volume = Math.min(1, bgSound.volume + 0.05); 
      runSound.volume = bgSound.volume;
      screamSound.volume = bgSound.volume;
      volumeSlider.value = bgSound.volume; 
    });

    // ‡∏Å‡∏î anywhere ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° + ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á
    document.body.addEventListener('click', nextText);
  </script>
</body>
</html>
